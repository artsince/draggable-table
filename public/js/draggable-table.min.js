/*!draggable-table v.1.0.0 2014-08-05 */
function $_DT(a,b){"use strict";var c=a,d=b||{},e={},f=0;d.headers&&!function(){var a,b=d.headers.length,e=document.createElement("thead"),f=document.createElement("tr");for(c.insertBefore(e,c.firstChild),e.appendChild(f),a=0;b>a;a+=1){var g=document.createElement("th");g.innerHTML=d.headers[a],f.appendChild(g)}}();var g=function(a,b){e[a]||(e[a]=[]),e[a].push(b)},h="",i=function(a){h=a.target.id;var b=document.getElementById(h);b.classList.add("dragged")},j=function(a){if(a.preventDefault(),a.target.parentNode.id!==h){var b=document.getElementById(h);a.target.parentNode.classList.contains("drag-over")&&(a.target.parentNode.classList.remove("drag-over"),parseInt(a.target.parentNode.getAttribute("list-index"),10)<parseInt(b.getAttribute("list-index"),10)&&a.target.parentNode.classList.remove("bottom-up"))}},k=function(a){if(a.preventDefault(),a.target.parentNode.id!==h){var b=document.getElementById(h);a.target.parentNode.classList.contains("drag-over")||(a.target.parentNode.classList.add("drag-over"),parseInt(a.target.parentNode.getAttribute("list-index"),10)<parseInt(b.getAttribute("list-index"),10)&&a.target.parentNode.classList.add("bottom-up"))}},l=function(a){a.preventDefault();var b=h,c=document.getElementById(b),d=parseInt(c.getAttribute("list-index"),10),f=parseInt(a.target.parentNode.getAttribute("list-index"),10);if(f>d?a.target.parentNode.parentNode.insertBefore(c,a.target.parentNode.nextSibling):a.target.parentNode.parentNode.insertBefore(c,a.target.parentNode),a.target.parentNode.classList.contains("drag-over")&&(a.target.parentNode.classList.remove("drag-over"),parseInt(a.target.parentNode.getAttribute("list-index"),10)<parseInt(c.getAttribute("list-index"),10)&&a.target.parentNode.classList.remove("bottom-up")),n(c,a.target.parentNode),e.moved)for(var g=0;g<e.moved.length;g+=1)e.moved[g].call(null,{id:b,index:parseInt(c.getAttribute("list-index"),10)})},m=function(){var a=document.getElementById(h);a.classList.remove("dragged"),h=""},n=function(a,b){var c,d=parseInt(a.getAttribute("list-index"),10),e=parseInt(b.getAttribute("list-index"),10);if(e>d)for(c=a.previousSibling;c&&parseInt(c.getAttribute("list-index"),10)>d;c=c.previousSibling)c.setAttribute("list-index",parseInt(c.getAttribute("list-index"),10)-1);else for(c=b;c&&parseInt(c.getAttribute("list-index"),10)<d;c=c.nextSibling)c.setAttribute("list-index",parseInt(c.getAttribute("list-index"),10)+1);a.setAttribute("list-index",e)},o=function(){var a=document.querySelector(".selected");a&&a.classList.remove("selected"),this.classList.add("selected")},p=function(a){a.setAttribute("draggable",!0),a.addEventListener("dragstart",i,!1),a.addEventListener("dragleave",j,!1),a.addEventListener("dragover",k,!1),a.addEventListener("drop",l,!1),a.addEventListener("dragend",m,!1),a.addEventListener("mousedown",o,!1),a.getAttribute("list-index")||(a.setAttribute("list-index",f),f+=1),c.appendChild(a)};return{appendRow:p,on:g}}